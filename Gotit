

import * as fileUtils from '../path/to/fileUtils'; // Import the module where the filename logic exists
import { yourComponentOrFunction } from './yourComponentOrFunction';

// Step 1: Spy on the function or method responsible for filename generation
jest.spyOn(fileUtils, 'generateFilename'); // Spying on the generateFilename function

describe('Filename Generation Tests', () => {
  const filenameReferenceNumber = 'ABC123';
  const timestamp = '20241118';

  it('should handle Single FX linked to Multiple ATPs', () => {
    const trades = [{ id: 1 }];
    const cumulative = { atps: [{}, {}] };
    const preview = { atpsCollective: [] };

    // Step 2: Mock the return value of generateFilename
    fileUtils.generateFilename.mockReturnValue('ATP-ABC123-1-20241118'); // Mocking filename

    const filename = yourComponentOrFunction(trades, cumulative, preview, filenameReferenceNumber, timestamp);

    // Step 3: Assert that the filename returned is the mocked value
    expect(filename).toBe('ATP-ABC123-1-20241118');
    expect(fileUtils.generateFilename).toHaveBeenCalledTimes(1); // Ensure it was called
  });

  it('should handle Single FX linked to Single ATP', () => {
    const trades = [{ id: 1 }];
    const cumulative = { atps: [{}] };
    const preview = { atpsCollective: [] };

    fileUtils.generateFilename.mockReturnValue('ATP-ABC123-20241118'); // Mocking filename

    const filename = yourComponentOrFunction(trades, cumulative, preview, filenameReferenceNumber, timestamp);

    expect(filename).toBe('ATP-ABC123-20241118');
    expect(fileUtils.generateFilename).toHaveBeenCalledTimes(1); // Ensure it was called
  });

  it('should handle Multiple FX linked to Single ATP', () => {
    const trades = [{ id: 1 }, { id: 2 }];
    const cumulative = { atps: [{}] };
    const preview = { atpsCollective: [] };

    fileUtils.generateFilename.mockReturnValue('ATP-MultiFX-20241118'); // Mocking filename

    const filename = yourComponentOrFunction(trades, cumulative, preview, filenameReferenceNumber, timestamp);

    expect(filename).toBe('ATP-MultiFX-20241118');
    expect(fileUtils.generateFilename).toHaveBeenCalledTimes(1); // Ensure it was called
  });
});
